
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Configuration File Format &#8212; CryoNIRSP_Pipeline v0.8.0</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700" type="text/css" />
    <link rel="stylesheet" href="_static/dkist.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/favico.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Reduction Walkthrough" href="walkthrough.html" />
    <link rel="prev" title="CryoNIRSP Pipeline Documentation" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.12.4.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.4.1/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="col-md-3 navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://nso.edu"><img src="_static/img/NSOlogo.gif">
        </a>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav hidden">
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">CryoNIRSP Pipeline Documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration File Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="walkthrough.html">Data Reduction Walkthrough</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">Reference/API</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Configuration File Format</a><ul>
<li><a class="reference internal" href="#main">Main</a></li>
<li><a class="reference internal" href="#darkcalibration">DarkCalibration</a></li>
<li><a class="reference internal" href="#gain1calibration">Gain1Calibration</a></li>
<li><a class="reference internal" href="#lampgaincalibration">LampGainCalibration</a></li>
<li><a class="reference internal" href="#gain4calibration">Gain4Calibration</a></li>
<li><a class="reference internal" href="#align3calibration">Align3Calibration</a></li>
<li><a class="reference internal" href="#instrumentpolarization">InstrumentPolarization</a></li>
<li><a class="reference internal" href="#example-config-file">Example Config File</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="index.html" title="Previous Chapter: CryoNIRSP Pipeline Documentation"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; CryoNIRSP Pip...</span>
    </a>
  </li>
  <li>
    <a href="walkthrough.html" title="Next Chapter: Data Reduction Walkthrough"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Data Reductio... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>
          
            <ul class="nav navbar-nav navbar-left">
              <li><a href="http://dkist.nso.edu/">DKIST</a></li>
              <li><a href="http://docs.cadair.com/devdocs">DC Developer Guide</a></li>
              <li><a href="http://docs.cadair.com/datarate">DKIST Data Rate</a></li>
              <li><a href="http://docs.cadair.com/datamodel">DKIST Data Model</a></li>
            </ul>
          
          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">

    <div class="col-md-3"><div id="side-logo" >
            <a href="http://dkist.nso.edu">
                <img src="_static/img/DKISTLogo-Medium.jpg">
            </a>
        </div><div id="sidebar" class="bs-sidenav" role="complementary">
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">CryoNIRSP Pipeline Documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration File Format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#main">Main</a></li>
<li class="toctree-l2"><a class="reference internal" href="#darkcalibration">DarkCalibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gain1calibration">Gain1Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lampgaincalibration">LampGainCalibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gain4calibration">Gain4Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#align3calibration">Align3Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#instrumentpolarization">InstrumentPolarization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-config-file">Example Config File</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="walkthrough.html">Data Reduction Walkthrough</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">Reference/API</a></li>
</ul>

            
        </div>
    </div>

    <div class="body col-md-9 content" role="main">
      
  <div class="section" id="configuration-file-format">
<h1>Configuration File Format<a class="headerlink" href="#configuration-file-format" title="Permalink to this headline">¶</a></h1>
<p>The CryoNIRSP Pipeline configuration file is in the standard INI format and contains the following sections and options. Any
options in <em>italics</em> are optional.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is OK to put science and calibration data all into the same directory. The specific task (Dark, Gain, Observation,
etc.) is determined from the <code class="xref py py-obj docutils literal notranslate"><span class="pre">DKIST004</span></code> header value.</p>
</div>
<div class="section" id="main">
<h2>Main<a class="headerlink" href="#main" title="Permalink to this headline">¶</a></h2>
<p>This section controls the top-level Science reduction. All of the *_cal options point to files that will not exist
on the first run of the pipeline. Once these objects have been created a lot of time can be saved by reusing them for
any other science runs that have the same setup. It is also possible to regenerate only a subset of the intermediate
Calibration Objects by simply pointing the corresponding option to a file that doesn’t exist.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All of the *_cal objects can be specified with or without their file extensions</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">raw_sci_dir</dt>
<dd class="field-odd"><p>Path to the directory containing raw CryoNIRSP frames to be reduced.</p>
</dd>
<dt class="field-even">output_prefix</dt>
<dd class="field-even"><p>The prefix to apply to all Level-1 science products. This string can also include a path structure.</p>
</dd>
<dt class="field-odd">dark_cal</dt>
<dd class="field-odd"><p>The location of a processed Dark Calibration object. If this file does not exist it will be generated.</p>
</dd>
<dt class="field-even">gain1_cal</dt>
<dd class="field-even"><p>The location of a processed Gain 1 Calibration object. If it does not exist it will be generated.</p>
</dd>
<dt class="field-odd">lamp_gain_cal</dt>
<dd class="field-odd"><p>The location of a processed LampGain Calibration object. If it does not exist it will be generated.</p>
</dd>
<dt class="field-even">gain4_cal</dt>
<dd class="field-even"><p>The location of a processed Gain 4 Calibration object. If it does not exist it will be generated.</p>
</dd>
<dt class="field-odd">align3_cal</dt>
<dd class="field-odd"><p>The location of a processed Align 3 Calibration object. If it does not exist it will be generated.</p>
</dd>
<dt class="field-even">instrument_pol_cal</dt>
<dd class="field-even"><p>The location of the Instrument Polarization Calibration object (i.e., demodulation matrices. If
it does not exist it will be generated.</p>
</dd>
<dt class="field-odd"><em>linearize</em></dt>
<dd class="field-odd"><p><strong>(bool)</strong> [<em>True</em>] If <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> then don’t attempt to linearize <em>any</em> data. This is useful for testing on fake data.</p>
</dd>
<dt class="field-even"><em>suffix</em></dt>
<dd class="field-even"><p>[<em>FITS</em>] The suffix to use both when looking for and writing any FITS file</p>
</dd>
<dt class="field-odd"><em>remove_TM</em></dt>
<dd class="field-odd"><p><strong>(bool)</strong> [<em>True</em>] If <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> then do not apply a polarimetric correction for M1 - M6 (inclusive)</p>
</dd>
<dt class="field-even"><em>include_M12</em></dt>
<dd class="field-even"><p><strong>(bool)</strong> [<em>True</em>] If <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> then do include mirrors M1 and M2 in the telescope polarimetric correction. This
option is only used if <code class="docutils literal notranslate"><span class="pre">remove_TM</span></code> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a></p>
</dd>
<dt class="field-odd"><em>remove_parallactic</em></dt>
<dd class="field-odd"><p><strong>(bool)</strong> [<em>True</em>]If <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> then do not include a final rotation into a common Solar reference frame.
This option is only used if <code class="docutils literal notranslate"><span class="pre">remove_TM</span></code> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p>
</dd>
<dt class="field-even"><em>telescope_db</em></dt>
<dd class="field-even"><p>[<em>None</em>] The path to a telescope mirror parameter database. If none is provided then the default PA&amp;C database
will be used.</p>
</dd>
</dl>
</div>
<div class="section" id="darkcalibration">
<h2>DarkCalibration<a class="headerlink" href="#darkcalibration" title="Permalink to this headline">¶</a></h2>
<p>This section will only be used if the file specified by <code class="docutils literal notranslate"><span class="pre">Main.dark_cal</span></code> does not exist.</p>
<dl class="field-list simple">
<dt class="field-odd">raw_dark_dir</dt>
<dd class="field-odd"><p>The location of a directory containing raw dark frames. If <code class="docutils literal notranslate"><span class="pre">Main.dark_cal</span></code> does not exist then this
directory must contain dark frames or an error will be thrown.</p>
</dd>
</dl>
</div>
<div class="section" id="gain1calibration">
<h2>Gain1Calibration<a class="headerlink" href="#gain1calibration" title="Permalink to this headline">¶</a></h2>
<p>This section will only be used if the file specified by <code class="docutils literal notranslate"><span class="pre">Main.gain1_cal</span></code> does not exist.</p>
<dl class="field-list simple">
<dt class="field-odd">raw_gain1_dir</dt>
<dd class="field-odd"><p>The location of a directory containing raw frames for the Gain1 task.</p>
</dd>
</dl>
</div>
<div class="section" id="lampgaincalibration">
<h2>LampGainCalibration<a class="headerlink" href="#lampgaincalibration" title="Permalink to this headline">¶</a></h2>
<p>This section will only be used if the file specified by <code class="docutils literal notranslate"><span class="pre">Main.lamp_gain_cal</span></code> does not exist.</p>
<dl class="field-list simple">
<dt class="field-odd">raw_lamp_dir</dt>
<dd class="field-odd"><p>The location of a directory containing raw frames for the LampGain task.</p>
</dd>
</dl>
</div>
<div class="section" id="gain4calibration">
<h2>Gain4Calibration<a class="headerlink" href="#gain4calibration" title="Permalink to this headline">¶</a></h2>
<p>This section will only be used if the file specified by <code class="docutils literal notranslate"><span class="pre">Main.gain4_cal</span></code> does not exist.</p>
<dl class="field-list simple">
<dt class="field-odd">raw_gain4_dir</dt>
<dd class="field-odd"><p>The location of a directory containing raw frames for the Gain4 task.</p>
</dd>
</dl>
</div>
<div class="section" id="align3calibration">
<h2>Align3Calibration<a class="headerlink" href="#align3calibration" title="Permalink to this headline">¶</a></h2>
<p>This section will only be used if the file specified by <code class="docutils literal notranslate"><span class="pre">Main.align3_cal</span></code> does not exist.</p>
<dl class="field-list simple">
<dt class="field-odd">raw_align3_dir</dt>
<dd class="field-odd"><p>The location of a directory containing raw frames for the Align3 task.</p>
</dd>
<dt class="field-even">raw_pinhole_dir</dt>
<dd class="field-even"><p>The location of a directory containing raw pinhole images.</p>
</dd>
</dl>
</div>
<div class="section" id="instrumentpolarization">
<h2>InstrumentPolarization<a class="headerlink" href="#instrumentpolarization" title="Permalink to this headline">¶</a></h2>
<p>This section will only be used if the file specified by <code class="docutils literal notranslate"><span class="pre">Main.instrument_pol_cal</span></code> does not exist.</p>
<dl class="field-list simple">
<dt class="field-odd">raw_pol_dir</dt>
<dd class="field-odd"><p>The location of a directory containing raw files associated with a single PolCal Calibration Sequence (CS)</p>
</dd>
<dt class="field-even">cu_numbins_x</dt>
<dd class="field-even"><p><strong>(int)</strong> The number of x-dimensions macropixels in the down-sampled CS data used for CU parameter fitting</p>
</dd>
<dt class="field-odd">cu_numbins_y</dt>
<dd class="field-odd"><p><strong>(int)</strong> The number of y-dimensions macropixels in the down-sampled CS data used for CU parameter fitting</p>
</dd>
<dt class="field-even">demod_numbins_x</dt>
<dd class="field-even"><p><strong>(int)</strong> The number of x-dimensions macropixels in the down-sampled CS data used for demodulation matrix calculation</p>
</dd>
<dt class="field-odd">demod_numbins_y</dt>
<dd class="field-odd"><p><strong>(int)</strong> The number of y-dimensions macropixels in the down-sampled CS data used for demodulation matrix calculation</p>
</dd>
<dt class="field-even"><em>threads</em></dt>
<dd class="field-even"><p><strong>(int)</strong> [<em>1</em>] The number of CPU threads to use when performing basic CryoNIRSP reductions on the CS steps</p>
</dd>
</dl>
</div>
<div class="section" id="example-config-file">
<h2>Example Config File<a class="headerlink" href="#example-config-file" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Main]</span>
<span class="na">raw_sci_dir</span> <span class="o">=</span> <span class="s">../raw</span>
<span class="na">output_prefix</span> <span class="o">=</span> <span class="s">Sci</span>
<span class="na">dark_cal</span> <span class="o">=</span> <span class="s">DarkCal</span>
<span class="na">gain1_cal</span> <span class="o">=</span> <span class="s">Gain1Cal</span>
<span class="na">lamp_gain_cal</span> <span class="o">=</span> <span class="s">LampCal</span>
<span class="na">gain4_cal</span> <span class="o">=</span> <span class="s">Gain4Cal</span>
<span class="na">align3_cal</span> <span class="o">=</span> <span class="s">Align3Cal</span>
<span class="na">instrument_pol_cal</span> <span class="o">=</span> <span class="s">InstPolCal</span>
<span class="na">linearize</span> <span class="o">=</span> <span class="s">False</span>
<span class="na">suffix</span> <span class="o">=</span> <span class="s">FITS</span>
<span class="na">remove_TM</span> <span class="o">=</span> <span class="s">True</span>
<span class="na">include_M12</span> <span class="o">=</span> <span class="s">False</span>
<span class="na">remove_parallactic</span> <span class="o">=</span> <span class="s">True</span>
<span class="na">telescope_db</span> <span class="o">=</span> <span class="s">my_great_database.txt</span>

<span class="k">[DarkCalibration]</span>
<span class="na">raw_dark_dir</span> <span class="o">=</span> <span class="s">../raw</span>

<span class="k">[Gain1Calibration]</span>
<span class="na">raw_gain1_dir</span> <span class="o">=</span> <span class="s">../raw</span>

<span class="k">[LampGainCalibration]</span>
<span class="na">raw_lamp_dir</span> <span class="o">=</span> <span class="s">../raw</span>

<span class="k">[Gain4Calibration]</span>
<span class="na">raw_gain4_dir</span> <span class="o">=</span> <span class="s">../raw</span>

<span class="k">[Align3Calibration]</span>
<span class="na">raw_align3_dir</span> <span class="o">=</span> <span class="s">../raw</span>
<span class="na">raw_pinhole_dir</span> <span class="o">=</span> <span class="s">../raw</span>

<span class="k">[InstrumentPolarization]</span>
<span class="na">raw_pol_dir</span> <span class="o">=</span> <span class="s">../polcal</span>
<span class="na">cu_numbins_x</span> <span class="o">=</span> <span class="s">1</span>
<span class="na">cu_numbins_y</span> <span class="o">=</span> <span class="s">1</span>
<span class="na">demod_numbins_x</span> <span class="o">=</span> <span class="s">4</span>
<span class="na">demod_numbins_y</span> <span class="o">=</span> <span class="s">4</span>
<span class="na">threads</span> <span class="o">=</span> <span class="s">3</span>
</pre></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <div class="left-footer">
         &copy; 2020, Arthur Eigenbrot
       <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a>
    </div>
   
    <div class="right-footer">
      Last updated on 26 Oct 2020.
    </div>
    <div class="centre-footer">
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1
    </div>
  </div>
</footer>
  </body>
</html>